(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1291:function(e,t,n){"use strict";n.r(t);var a=n(647),r=n(13),o=n.n(r),i=n(34),l=n(17),c=n(18),s=n(21),u=n(19),p=n(20),f=n(187),m=n(0),h=n.n(m),d=n(620),b=n(607),g=n(14),y=n(627),v=n(610),w=n(69),C=n(622),O=n(621),E=n(623),S=n(661),j=n(45),k=n(665),x=(n(633),n(25)),P=n.n(x),N=n(770),T=n.n(N),I=(n(671),n(35)),R=d.a.Item,V=b.a.Option,_=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),p=0;p<r;p++)c[p]=arguments[p];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={confirmDirty:!1,autoCompleteResult:[],editorState:k.EditorState.createEmpty(),previewVisible:!1,previewImage:"",fileList:[],categories:[],tags:[],inputVisible:!1,inputValue:"",fileName:"",loading:!1,color:"",name:"",parent:"",pic:"",seo:"",description:"",removedFile:[]},n.componentDidMount=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loading:!0},Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.props.match.params.id)&&Number.isInteger(parseInt(t,10))?P()("/api/v2/categories/".concat(t)).then(function(){var e=Object(i.a)(o.a.mark(function e(a){var r,l,c,s,u,p,f,m,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.data,l=r.name,c=r.parent,s=r.pic,u=r.seo,p=r.colour,f=r.description,m=r.tags,e.next=4,P.a.get("/api/v2/categories");case 4:h=e.sent,n.setState({loading:!1},Object(i.a)(o.a.mark(function e(){var a,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.data,r=a.filter(function(e){return e.id!==parseInt(t,10)}),i=[],e.next=5,P.a.get("/api/v2/files/getFile/".concat(s)).then(function(e){i.push({uid:"-1",name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(s)})}).catch(function(e){});case 5:n.setState({categories:r,name:l,parent:c,pic:s,seo:u,color:p,description:f,tags:m,fileList:i});case 6:case"end":return e.stop()}},e)})));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){var t=e.response,a=t.data.message,r=t.statusText;I.NotificationManager.error(a||r,"ERROR",2e3),setTimeout(function(){n.props.history.push("/admin/Categories/Main")},2e3)}):n.props.history.push("/admin/Categories/Main");case 2:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e)})),n.toggleLoading=function(){n.setState({loading:!n.state.loading})},n.changeColour=function(e){var t=e.color;n.setState({color:t})},n.handleClose=function(e){var t=n.state.tags.filter(function(t){return t!==e});n.setState({tags:t})},n.showInput=function(){n.setState({inputVisible:!0},function(){return n.input.focus()})},n.handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.handleInputConfirm=function(){var e=Object(f.a)(Object(f.a)(n)).state,t=e.inputValue,r=e.tags;t&&-1===r.indexOf(t)&&(r=[].concat(Object(a.a)(r),[t])),n.setState({tags:r,inputVisible:!1,inputValue:""})},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handleSubmit=function(){var e=Object(i.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.removedFile,t.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){var r=n.props.match.params.id,l=n.state,c=l.fileList,s=l.tags,u=l.fullName;if(c.length){if(t.colour){var p=t.colour.color;t.colour=p}t.pic=u,t.tags=s,n.setState(function(){return{loading:!0}}),P.a.post("/api/v2/categories/update",{data:t,params:{id:r}}).then(function(e){a.length&&a.map(function(){var e=Object(i.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var t=e.data.message,r=e.statusText;200===e.status?n.setState({loading:!1},function(){I.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){n.props.history.push("/admin/Categories/Main")},3e3)}):n.setState({loading:!1},function(){I.NotificationManager.error(t||r,"ERROR",2e3)})}).catch(function(e){n.setState({loading:!1},function(){var t=e.response,n=t.data.message,a=t.statusText;I.NotificationManager.error(n||a,"ERRRO",2e3)})})}else I.NotificationManager.error("Please Choose a new image !","ERROR",2e3)}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){var t=e.file,a=e.fileList;if(n.setState({fileList:a}),"done"===t.status){var r=t.response.fullName;n.setState({fullName:r})}},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.removeFile=function(){var e=Object(i.a)(o.a.mark(function e(t){var a,r,i,l,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.removedFile,(r=t.url)?(i=r.split("/"),l=i[i.length-1],a.push(l)):(c=t.response.fullName,a.push(c)),n.setState({removedFile:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.saveInputRef=function(e){return n.input=e},n.handleConfirmBlur=function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})},n.onEditorStateChange=function(e){n.setState({editorState:e})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},a=this.state,r=a.tags,o=a.inputVisible,i=a.inputValue,l=a.name,c=a.seo,s=a.previewVisible,u=a.fileList,p=a.categories,f=a.color,m=a.description,k=a.parent,x=a.pic,P=h.a.createElement("div",null,h.a.createElement(g.a,{type:"plus"}),h.a.createElement("div",{className:"ant-upload-text"},"Upload"));return h.a.createElement(y.a,{className:"gx-card",title:"Category Details"},h.a.createElement(v.a,{spinning:this.state.loading},h.a.createElement(d.a,{onSubmit:this.handleSubmit},h.a.createElement(R,Object.assign({},n,{label:h.a.createElement("span",null,"Name\xa0",h.a.createElement(w.a,{title:"Nama of Category, such as Sport"},h.a.createElement(g.a,{type:"question-circle-o"})))}),t("name",{initialValue:l,rules:[{max:20,message:"Max Letters for Name is 20",whitespace:!0}]})(h.a.createElement(C.a,null))),h.a.createElement(R,Object.assign({},n,{label:h.a.createElement("span",null,"Parent category")}),t("parent")(h.a.createElement(b.a,{placeholder:"Select Parent Of Category"},h.a.createElement(V,{value:"0",style:{color:"red"}},"Main Category"),p.length&&p.map(function(e){return 0===e.parent?h.a.createElement(V,{value:"".concat(e.id)},e.name):null})))),h.a.createElement(R,Object.assign({},n,{label:h.a.createElement("span",null,"Current Parent category")}),0===k?h.a.createElement("span",{style:{color:"red"}},"Main Category"):p&&p.map(function(e){return e.id===k?h.a.createElement("span",{style:{color:"red"}},e.name):null})),h.a.createElement(R,Object.assign({},n,{label:"Seo Name"}),t("seo",{initialValue:c,rules:[{max:20,message:"Max Letters for Seo is 20",whitespace:!0}]})(h.a.createElement(C.a,null))),h.a.createElement(R,Object.assign({},n,{label:"Choose Colour"}),t("colour",{})(h.a.createElement(T.a,{color:f,onChange:this.changeColour},h.a.createElement(C.a,{className:"colour-picker",style:{cursor:"pointer !important",backgroundColor:f,width:"50px"}})))),h.a.createElement(R,Object.assign({},n,{label:"Brief Description"}),t("description",{initialValue:m})(h.a.createElement(C.a.TextArea,{placeholder:"Enter a brief dexcription for this category",autosize:{minRows:2,maxRows:6}}))),h.a.createElement(R,Object.assign({},n,{label:"Photo Of Category"}),h.a.createElement(O.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:u,onPreview:this.handlePreview,onChange:this.handleChange,withCredentials:!0,onRemove:this.removeFile},u.length>=1?null:P),h.a.createElement(E.a,{visible:s,footer:null,onCancel:this.handleCancel},h.a.createElement("img",{alt:"example",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(x)}))),h.a.createElement(R,Object.assign({},n,{label:"Meta tags"}),h.a.createElement("div",null,r.map(function(t){var n=t.length>20,a=h.a.createElement(S.a,{key:t,closable:!0,afterClose:function(){return e.handleClose(t)}},n?"".concat(t.slice(0,20),"..."):t);return n?h.a.createElement(w.a,{title:t,key:t},a):a}),o&&h.a.createElement(C.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:i,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!o&&h.a.createElement(S.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},h.a.createElement(g.a,{type:"plus"})," New Tag"))),h.a.createElement(R,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},h.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Update")))),h.a.createElement(I.NotificationContainer,null))}}]),t}(m.Component),F=d.a.create()(_);t.default=F},647:function(e,t,n){"use strict";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return a})},661:function(e,t,n){"use strict";var a=n(0),r=n(38),o=n(3),i=n.n(o),l=n(37),c=n(30),s=n(14),u=n(10);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},v=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,b(t).apply(this,arguments))).handleClick=function(){var t=e.props,n=t.checked,a=t.onChange;a&&a(!n)},e.renderCheckableTag=function(t){var n,r=t.getPrefixCls,o=e.props,l=o.prefixCls,c=o.className,s=o.checked,u=y(o,["prefixCls","className","checked"]),p=r("tag",l),h=i()(p,(m(n={},"".concat(p,"-checkable"),!0),m(n,"".concat(p,"-checkable-checked"),s),n),c);return delete u.onChange,a.createElement("div",f({},u,{className:h,onClick:e.handleClick}))},e}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a["Component"]),n=t,(r=[{key:"render",value:function(){return a.createElement(u.a,null,this.renderCheckableTag)}}])&&h(n.prototype,r),o&&h(n,o),t}(),w=n(188);function C(e){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return!t||"object"!==C(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},N=function(e){e.show;var t=P(e,["show"]),n=Object(l.default)(t,["onClose","afterClose","color","visible","closable"]);return a.createElement("div",n)},T=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=j(this,k(t).apply(this,arguments))).state={visible:!0},e.handleIconClick=function(t){e.setVisible(!1,t)},e.animationEnd=function(t,n){if(!n){var a=e.props.afterClose;a&&a()}},e.renderTag=function(t){var n=t.getPrefixCls,o=e.props,i=o.prefixCls,l=o.children,c=P(o,["prefixCls","children"]),s=e.state.visible,u=n("tag",i);return a.createElement(w.a,null,a.createElement(r.a,{component:"",showProp:"show",transitionName:"".concat(u,"-zoom"),onEnd:e.animationEnd},a.createElement(N,E({show:s},c,{className:e.getTagClassName(t),style:e.getTagStyle()}),l,e.renderCloseIcon())))},e}var n,o,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,a["Component"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:null}}],(o=[{key:"setVisible",value:function(e,t){var n=this.props.onClose;n&&n(t),t.defaultPrevented||"visible"in this.props||this.setState({visible:e})}},{key:"isPresetColor",value:function(e){return!!e&&/^(pink|red|yellow|orange|cyan|green|blue|purple|geekblue|magenta|volcano|gold|lime)(-inverse)?$/.test(e)}},{key:"getTagStyle",value:function(){var e=this.props,t=e.color,n=e.style,a=this.isPresetColor(t);return E({backgroundColor:t&&!a?t:void 0},n)}},{key:"getTagClassName",value:function(e){var t,n=e.getPrefixCls,a=this.props,r=a.prefixCls,o=a.className,l=a.color,c=this.state.visible,s=this.isPresetColor(l),u=n("tag",r);return i()(u,(O(t={},"".concat(u,"-").concat(l),s),O(t,"".concat(u,"-has-color"),l&&!s),O(t,"".concat(u,"-hidden"),!c),t),o)}},{key:"renderCloseIcon",value:function(){return this.props.closable?a.createElement(s.a,{type:"close",onClick:this.handleIconClick}):null}},{key:"render",value:function(){return a.createElement(u.a,null,this.renderTag)}}])&&S(n.prototype,o),l&&S(n,l),t}();T.CheckableTag=v,T.defaultProps={closable:!1},Object(c.polyfill)(T);t.a=T}}]);
//# sourceMappingURL=40.8abcd1e3.chunk.js.map