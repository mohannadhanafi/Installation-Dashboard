(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1260:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a.n(n),r=a(34),l=a(17),s=a(18),o=a(21),c=a(19),u=a(20),p=a(0),m=a.n(p),f=a(22),d=a(620),v=a(622),h=a(14),g=a(627),b=a(621),w=a(623),y=a(45),E=a(25),x=a.n(E),k=a(637),C=a.n(k),S=a(642),F=a(35),O=(a(696),d.a.Item),j=v.a.TextArea,_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={confirmDirty:!1,autoCompleteResult:[],fileList:[],previewVisible:!1,previewImage:"",tags:[],inputVisible:!1,categories:[],fileName:"",content:"",removedFile:[],heroLength:"",inputValue:"",breaking:!1,icon:"",disable:!1},a.componentDidMount=Object(r.a)(i.a.mark(function e(){var t,n,r,l,s,o,c,u,p,m,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.id,e.next=3,x.a.get("/api/v2/features/".concat(t));case 3:if(n=e.sent,r=n.data,l=r[0],s=l.sub_title,o=l.title,c=l.cta,u=l.desc,p=l.icon,m=l.body,f=[],""===p){e.next=10;break}return e.next=10,x.a.get("/api/v2/files/getFile/".concat(p)).then(function(e){return f.push({uid:C()(),name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(p)})}).catch(function(e){});case 10:a.setState({sub_title:s,title:o,cta:c,desc:u,icon:p,fileList:f,content:m});case 11:case"end":return e.stop()}},e)})),a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handleEditorChange=function(e){var t=e.target.getContent();a.setState(function(){return{content:t}})},a.showPickedIcon=function(e){var t=e.name;a.setState({icon:t,previewIcon:t})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){a.setState({disable:!0});var n=a.props.match.params.id,l=a.state,s=l.removedFile,o=l.fileName;""!==o&&(t.icon=o);var c=a.state.content;t.body=c,x.a.post("/api/v2/features/update",{data:t,params:{id:n}}).then(function(e){var t=e.data.message;F.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){a.props.history.push("/admin/features/view"),a.setState({disable:!0})},3e3),s.length&&s.map(function(){var e=Object(r.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){var e=Object(r.a)(i.a.mark(function e(t){var n,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.response,r=n.data.message,l=n.statusText,F.NotificationManager.error(r||l,"ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.removeFile=function(){var e=Object(r.a)(i.a.mark(function e(t){var n,r,l,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.removedFile,(r=t.url)?(l=r.split("/"),s=l[l.length-1],n.push(s)):(o=t.response.fullName,n.push(o)),a.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.file,n=e.fileList,i="image/svg"===t.type,r="image/png"===t.type,l=t.size/1024/1024<2;a.setState({fileList:n});var s=t.status;if(n.length)if(i||r)if(l){if("done"===s){var o=t.response.fullName;a.setState({fileName:o})}}else F.NotificationManager.error("Image must smaller than 2MB!","ERROR",2e3),a.setState({fileList:[]});else F.NotificationManager.error("You can only upload image files!","ERROR",2e3),a.setState({fileList:[]})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.cta,n=e.desc,i=e.icon,r=e.previewVisible,l=e.fileList,s=e.disable,o=e.content,c=this.props.form.getFieldDecorator,u=m.a.createElement("div",null,m.a.createElement(h.a,{type:"plus"}),m.a.createElement("div",{className:"ant-upload-text"},"Upload")),p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return m.a.createElement(g.a,{className:"gx-card",title:"Edit Feature"},m.a.createElement(d.a,{onSubmit:this.handleSubmit},m.a.createElement(O,Object.assign({},p,{label:m.a.createElement("span",null,"Image")}),m.a.createElement(m.a.Fragment,null,m.a.createElement(b.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:l,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile,accept:".svg,.png"},1===l.length?null:u),m.a.createElement(w.a,{visible:r,footer:null,onCancel:this.handleCancel},m.a.createElement("img",{alt:"example",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(i)})))),m.a.createElement(O,Object.assign({},p,{label:m.a.createElement("span",null,"Title")}),c("title",{initialValue:t,rules:[{max:20,message:"Max length is 20 letter",whitespace:!0}]})(m.a.createElement(v.a,null))),m.a.createElement(O,Object.assign({},p,{label:m.a.createElement("span",null,"Description")}),c("desc",{initialValue:n,rules:[{max:250,message:"Max length is 250 letter",whitespace:!0}]})(m.a.createElement(j,{rows:4,maxLength:300}))),m.a.createElement(O,Object.assign({},p,{label:m.a.createElement("span",null,"Call To Action")}),c("cta",{initialValue:a})(m.a.createElement(v.a,null))),m.a.createElement(O,Object.assign({},p,{label:m.a.createElement("span",null,"Body")}),m.a.createElement(S.a,{initialValue:o,content:o,init:{images_upload_url:"/api/v2/files/uploadFile",images_upload_base_path:"/api/v2/files/uploadFile",image_caption:!0,images_upload_handler:function(e,t,a){var n=new FormData;n.append("file",e.blob()),x.a.post("/api/v2/files/uploadFile",n).then(function(e){var a=e.data.fullName;t("/api/v2/files/getFile/".concat(a))}).catch(function(e){a("error !")})},height:500,image_title:!0,automatic_uploads:!0,file_picker_types:"file image media",images_upload_credentials:!0,plugins:"print preview fullpage powerpaste searchreplace autolink directionality advcode visualblocks visualchars fullscreen image link media mediaembed template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount tinymcespellchecker a11ychecker imagetools textpattern help formatpainter permanentpen pageembed mentions linkchecker",toolbar:"formatselect | bold italic strikethrough forecolor backcolor permanentpen formatpainter | link image media pageembed | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent | removeformat | addcomment"},onChange:this.handleEditorChange})),m.a.createElement(O,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},s?m.a.createElement(y.a,{type:"primary",disabled:!0,htmlType:"submit"},"Save"):m.a.createElement(y.a,{type:"primary",htmlType:"submit"},"Save"))),m.a.createElement(F.NotificationContainer,null))}}]),t}(p.Component),R=d.a.create()(_);t.default=Object(f.b)(function(e){var t=e.auth;return{authUser:t.authUser,url:t.url,role:t.role}})(R)},634:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},635:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},637:function(e,t,a){var n=a(638),i=a(639),r=i;r.v1=n,r.v4=i,e.exports=r},638:function(e,t,a){var n,i,r=a(634),l=a(635),s=0,o=0;e.exports=function(e,t,a){var c=t&&a||0,u=t||[],p=(e=e||{}).node||n,m=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==m){var f=r();null==p&&(p=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==m&&(m=i=16383&(f[6]<<8|f[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:o+1,h=d-s+(v-o)/1e4;if(h<0&&void 0===e.clockseq&&(m=m+1&16383),(h<0||d>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,o=v,i=m;var g=(1e4*(268435455&(d+=122192928e5))+v)%4294967296;u[c++]=g>>>24&255,u[c++]=g>>>16&255,u[c++]=g>>>8&255,u[c++]=255&g;var b=d/4294967296*1e4&268435455;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=m>>>8|128,u[c++]=255&m;for(var w=0;w<6;++w)u[c+w]=p[w];return t||l(u)}},639:function(e,t,a){var n=a(634),i=a(635);e.exports=function(e,t,a){var r=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||n)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t)for(var s=0;s<16;++s)t[r+s]=l[s];return t||i(l)}}}]);
//# sourceMappingURL=23.23e99e3a.chunk.js.map