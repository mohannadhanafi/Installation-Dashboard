(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1259:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a.n(n),i=a(34),s=a(17),l=a(18),o=a(21),u=a(19),c=a(20),f=a(0),p=a.n(f),m=a(620),d=a(622),v=a(14),g=a(627),h=a(621),b=a(623),w=a(45),y=a(25),S=a.n(y),E=a(35),x=a(637),R=a.n(x),C=m.a.Item,O=d.a.TextArea,F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={featurestitle:"",featuressub:"",fileList:[],fileName:"",removedFile:[],disable:!1},a.componentDidMount=Object(i.a)(r.a.mark(function e(){var t,n,i,s,l,o,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/v2/titles");case 2:if(t=e.sent,n=t.data,i=n[0],s=i.featurestitle,l=i.featuressub,o=i.featuresimage,u=[],""===o){e.next=9;break}return e.next=9,S.a.get("/api/v2/files/getFile/".concat(o)).then(function(e){return u.push({uid:R()(),name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(o)})}).catch(function(e){});case 9:a.setState(function(){return{featurestitle:s,featuressub:l,featuresimage:o,fileList:u}});case 10:case"end":return e.stop()}},e)})),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){a.setState({disable:!0});var n=a.state,s=n.removedFile,l=n.fileList,o=n.fileName;""!==o&&(t.featuresimage=o),l.length?S.a.post("/api/v2/titles",t).then(function(e){var t=e.data.message,n=e.statusText;200===e.status?a.setState({loading:!1},function(){E.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){a.props.history.push("/admin/features/settings"),a.setState({disable:!1})},3e3),s.length&&s.map(function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}):a.setState({loading:!1},function(){E.NotificationManager.error(t||n,"ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3)})}).catch(function(e){a.setState({loading:!1},function(){var t=e.response,n=t.data.message,r=t.statusText;E.NotificationManager.error(n||r,"ERRRO",2e3),setTimeout(function(){a.setState({disable:!1})},2e3)})}):(E.NotificationManager.error("Please Choose an image !","ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3))}})},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.showPickedIcon=function(e){var t=e.name;a.setState({background:t})},a.handleChange=function(e){var t=e.file,n=e.fileList,r="image/jpeg"===t.type,i="image/png"===t.type,s=t.size/1024/1024<2;a.setState({fileList:n});var l=t.status;if(n.length)if(r||i)if(s){if("done"===l){var o=t.response.fullName;a.setState({fileName:o})}}else E.NotificationManager.error("Image must smaller than 2MB!","ERROR",2e3),a.setState({fileList:[]});else E.NotificationManager.error("You can only upload image files!","ERROR",2e3),a.setState({fileList:[]})},a.removeFile=function(){var e=Object(i.a)(r.a.mark(function e(t){var n,i,s,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.removedFile,(i=t.url)?(s=i.split("/"),l=s[s.length-1],n.push(l)):(o=t.response.fullName,n.push(o)),a.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.featurestitle,n=t.featuressub,r=t.fileList,i=t.featuresimage,s=t.previewVisible,l=t.disable,o=p.a.createElement("div",null,p.a.createElement(v.a,{type:"plus"}),p.a.createElement("div",{className:"ant-upload-text"},"Upload")),u={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return p.a.createElement(g.a,{className:"gx-card",title:"Features Settings"},p.a.createElement(m.a,{onSubmit:this.handleSubmit},p.a.createElement(C,Object.assign({},u,{label:p.a.createElement("span",null,"Title")}),e("featurestitle",{initialValue:a,rules:[{required:!0,message:"Please input the title!",whitespace:!0},{max:20,message:"Max is 20 letter"}]})(p.a.createElement(d.a,null))),p.a.createElement(C,Object.assign({},u,{label:p.a.createElement("span",null,"Subtitle")}),e("featuressub",{initialValue:n,rules:[{required:!0,message:"Please input the subtitle!",whitespace:!0},{max:150,message:"Max is 150 letter"}]})(p.a.createElement(O,null))),p.a.createElement(C,Object.assign({},u,{label:p.a.createElement("span",null," Image")}),p.a.createElement(p.a.Fragment,null,p.a.createElement(h.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:r,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile},1===r.length?null:o),p.a.createElement(b.a,{visible:s,footer:null,onCancel:this.handleCancel},p.a.createElement("img",{alt:"example",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(i)})))),p.a.createElement(C,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},l?p.a.createElement(w.a,{type:"primary",disabled:!0,htmlType:"submit"},"Save"):p.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"))),p.a.createElement(E.NotificationContainer,null))}}]),t}(f.Component),N=m.a.create()(F);t.default=N},634:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},635:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},637:function(e,t,a){var n=a(638),r=a(639),i=r;i.v1=n,i.v4=r,e.exports=i},638:function(e,t,a){var n,r,i=a(634),s=a(635),l=0,o=0;e.exports=function(e,t,a){var u=t&&a||0,c=t||[],f=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:r;if(null==f||null==p){var m=i();null==f&&(f=n=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==p&&(p=r=16383&(m[6]<<8|m[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:o+1,g=d-l+(v-o)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||d>l)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=d,o=v,r=p;var h=(1e4*(268435455&(d+=122192928e5))+v)%4294967296;c[u++]=h>>>24&255,c[u++]=h>>>16&255,c[u++]=h>>>8&255,c[u++]=255&h;var b=d/4294967296*1e4&268435455;c[u++]=b>>>8&255,c[u++]=255&b,c[u++]=b>>>24&15|16,c[u++]=b>>>16&255,c[u++]=p>>>8|128,c[u++]=255&p;for(var w=0;w<6;++w)c[u+w]=f[w];return t||s(c)}},639:function(e,t,a){var n=a(634),r=a(635);e.exports=function(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var l=0;l<16;++l)t[i+l]=s[l];return t||r(s)}}}]);
//# sourceMappingURL=24.d66607ed.chunk.js.map