(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1352:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a.n(n),r=a(34),s=a(17),o=a(18),l=a(21),u=a(19),c=a(20),p=a(0),f=a.n(p),d=a(620),m=a(617),v=a(14),h=a(627),g=a(610),w=a(621),y=a(623),b=a(45),S=a(35),C=a(665),E=(a(633),a(25)),x=a.n(E),V=a(637),F=a.n(V),j=d.a.Item,O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={confirmDirty:!1,autoCompleteResult:[],editorState:C.EditorState.createEmpty(),previewVisible:!1,previewImage:"",fileList:[],inputVisible:!1,inputValue:"",fileName:"",loading:!1,name:"",pic:"",content:"",deletedFile:[]},a.componentDidMount=Object(r.a)(i.a.mark(function e(){var t,n,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("/api/v2/gallery");case 2:t=e.sent,n=t.data,r=n[0].pic,s=[],r.map(function(e){return s.push({uid:F()(),name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(e)}),s}),a.setState({pic:r,fileList:s}),console.log(s,r);case 9:case"end":return e.stop()}},e)})),a.toggleLoading=function(){a.setState({loading:!a.state.loading})},a.showInput=function(){a.setState({inputVisible:!0},function(){return a.input.focus()})},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.removeFile=function(){var e=Object(r.a)(i.a.mark(function e(t){var n,r,s,o,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.deletedFile,(r=t.url)?(s=r.split("/"),o=s[s.length-1],n.push(o)):(l=t.response.fullName,n.push(l)),a.setState({deletedFile:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.deletedFile,s=t.fileList,o=[];s.map(function(e){var t=e.url;if(!t){var a=e.response.fullName;return o.push(a),o}var n=t.split("/"),i=n[n.length-1];o.push(i)}),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var s=a.props.match.params.id;t.pic=o,o.length?x.a.post("/api/v2/gallery",{data:t,params:{id:s}}).then(function(e){var t=e.data.message,s=e.statusText;200===e.status?(n.length&&n.map(function(){var e=Object(r.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.setState({loading:!1},function(){S.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){a.props.history.push("/admin/gallery"),a.setState({disable:!1})},3e3)})):a.setState({loading:!1},function(){m.a.error(t||s)})}):(S.NotificationManager.error("Please Choose an image !","ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3))}})},a.handleChange=function(e){var t=e.file,n=e.fileList;if(a.setState({fileList:n}),"done"===t.status){var i=t.response.fullName;a.setState({pic:i})}},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){this.props.form.getFieldDecorator;var e=this.state,t=(e.inputVisible,e.inputValue,e.previewVisible),a=e.fileList,n=e.pic,i=f.a.createElement("div",null,f.a.createElement(v.a,{type:"plus"}),f.a.createElement("div",{className:"ant-upload-text"},"Upload an image"));return f.a.createElement(h.a,{className:"gx-card",title:"Gallery"},f.a.createElement(g.a,{spinning:this.state.loading},f.a.createElement(d.a,{onSubmit:this.handleSubmit},f.a.createElement(j,Object.assign({},{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:20},sm:{span:12}}},{label:"Gallery"}),f.a.createElement(w.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:a,onPreview:this.handlePreview,onChange:this.handleChange,withCredentials:!0,onRemove:this.removeFile},a.length>=6?null:i),f.a.createElement(y.a,{visible:t,footer:null,onCancel:this.handleCancel},f.a.createElement("img",{alt:"feature icon/img",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(n)}))),f.a.createElement(j,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},f.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Save")))),f.a.createElement(S.NotificationContainer,null))}}]),t}(p.Component),k=d.a.create()(O);t.default=k},634:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},635:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=a;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},637:function(e,t,a){var n=a(638),i=a(639),r=i;r.v1=n,r.v4=i,e.exports=r},638:function(e,t,a){var n,i,r=a(634),s=a(635),o=0,l=0;e.exports=function(e,t,a){var u=t&&a||0,c=t||[],p=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==f){var d=r();null==p&&(p=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:l+1,h=m-o+(v-l)/1e4;if(h<0&&void 0===e.clockseq&&(f=f+1&16383),(h<0||m>o)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=m,l=v,i=f;var g=(1e4*(268435455&(m+=122192928e5))+v)%4294967296;c[u++]=g>>>24&255,c[u++]=g>>>16&255,c[u++]=g>>>8&255,c[u++]=255&g;var w=m/4294967296*1e4&268435455;c[u++]=w>>>8&255,c[u++]=255&w,c[u++]=w>>>24&15|16,c[u++]=w>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var y=0;y<6;++y)c[u+y]=p[y];return t||s(c)}},639:function(e,t,a){var n=a(634),i=a(635);e.exports=function(e,t,a){var r=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[r+o]=s[o];return t||i(s)}}}]);
//# sourceMappingURL=25.36f6c3a3.chunk.js.map