(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1301:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a(13),i=a.n(r),s=a(34),l=a(17),c=a(18),o=a(21),u=a(19),p=a(20),m=a(0),f=a.n(m),d=a(620),v=a(14),g=a(622),h=a(627),y=a(621),b=a(623),E=a(606),w=a(45),x=(a(633),a(25)),C=a.n(x),k=a(35),F=a(708),O=a.n(F),V=a(637),R=a.n(V),j=d.a.Item,S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={footer_description:"",mobile:"",email:"",logo:"",copyrighrs:"",previewVisible:!1,previewImage:"",fileList:[],inputVisible:!1,fileName:"",pic:"noPic.jpg",removedFile:[],features:[]},a.handleSubmit=function(e){e.preventDefault();var t=a.props.match.params.id;a.props.form.validateFieldsAndScroll(function(e,n){if(!e){var r=a.state,l=r.removedFile,c=r.fileName;""!==c&&(n.image=c),C.a.post("/api/v2/pricingPlans/update/".concat(t),n).then(function(e){var t=e.data.message,n=e.statusText;200===e.status?(k.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){a.props.history.push("/admin/pricing/view")},3e3),l.length&&l.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):k.NotificationManager.error(t||n,"ERROR",2e3)}).catch(function(e){a.setState({loading:!1},function(){var t=e.response,a=t.data.message,n=t.statusText;k.NotificationManager.error(a||n,"ERROR",2e3)})})}})},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.removeFile=function(){var e=Object(s.a)(i.a.mark(function e(t){var n,r,s,l,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.removedFile,(r=t.url)?(s=r.split("/"),l=s[s.length-1],n.push(l)):(c=t.response.fullName,n.push(c)),a.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.file,n=e.fileList,r="image/svg"===t.type,i="image/png"===t.type,s=t.size/1024/1024<2;a.setState({fileList:n});var l=t.status;if(n.length)if(r||i)if(s){if("done"===l){var c=t.response.fullName;a.setState({fileName:c})}}else k.NotificationManager.error("Image must smaller than 2MB!","ERROR",2e3),a.setState({fileList:[]});else k.NotificationManager.error("You can only upload image files!","ERROR",2e3),a.setState({fileList:[]})},a.onChangeCheck=function(){a.setState({primary:!a.state.primary})},a.remove=function(e){var t=a.props.form,n=t.getFieldValue("keys"),r=a.state.features.filter(function(t,a){return a!==e});a.setState(function(){return{features:r}}),t.setFieldsValue({keys:n.filter(function(t){return t!==e})})},a.add=function(){var e,t=a.props.form,n=t.getFieldValue("keys"),r=n[n.length-1];isNaN(r)?(e=n.concat(0),t.setFieldsValue({keys:e})):(e=n.concat(r+1),t.setFieldsValue({keys:e}))},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;C()("/api/v2/pricingPlans/".concat(t)).then(function(){var t=Object(s.a)(i.a.mark(function t(a){var r,s,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.data,s=r.image,l=[],""===s){t.next=6;break}return t.next=6,C.a.get("/api/v2/files/getFile/".concat(s)).then(function(e){return l.push({uid:R()(),name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(s)})}).catch(function(e){});case 6:e.setState(Object(n.a)({},r,{fileList:l}));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){var a=t.response,n=a.data.message,r=a.statusText;k.NotificationManager.error(n||r,"ERROR",2e3),setTimeout(function(){e.props.history.push("/admin/pricing/view")},2e3)})}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldValue,r=this.state,i=r.fileList,s=r.previewVisible,l=r.pic,c=r.title,o=r.description,u=r.price,p=r.interval,m=r.cta,x=r.features,C=r.primary,F={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},V=f.a.createElement("div",null,f.a.createElement(v.a,{type:"plus"}),f.a.createElement("div",{className:"ant-upload-text"},"Upload")),R=[];x&&x.map(function(e,t){return R.push(t)}),a("keys",{initialValue:R});var S=n("keys"),N=S.map(function(t,n){return f.a.createElement(j,Object.assign({},F,{label:0===n?"Features":" ",required:!1,key:S[n]}),a("features[".concat(S[n],"]"),{initialValue:x[n],validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input feature or delete this field."}]})(f.a.createElement(g.a,{placeholder:"Feature",style:{width:"40%",marginRight:8}})),S.length>0?f.a.createElement(v.a,{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove(t)}}):null)});return f.a.createElement(h.a,{className:"gx-card",title:"Update Pricing Plan - ".concat(c)},f.a.createElement(d.a,{onSubmit:this.handleSubmit},f.a.createElement(j,Object.assign({},F,{label:"Image"}),f.a.createElement(y.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handleChange,withCredentials:!0,onRemove:this.removeFile,accept:".png,.svg"},i.length>=1?null:V),f.a.createElement(b.a,{visible:s,footer:null,onCancel:this.handleCancel},f.a.createElement("img",{alt:"example",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(l)}))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Title")}),a("title",{initialValue:c,rules:[{required:!0,message:"Please enter the title !"},{max:30,message:"Max is 30 Letter"}]})(f.a.createElement(g.a,null))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Description")}),a("description",{initialValue:o,rules:[{max:150,message:"Max is 150 Letter"}]})(f.a.createElement(O.a,{rows:4}))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Price - Currency")}),a("price",{initialValue:u,rules:[{required:!0,message:"Please enter the price !"},{max:15,message:"Max is 15 Letter"}]})(f.a.createElement(g.a,null))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Interval")}),a("interval",{initialValue:p,rules:[{required:!0,message:"Please enter the interval !"},{max:15,message:"Max is 15 Letter"}]})(f.a.createElement(g.a,null))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Call To Action")}),a("cta",{initialValue:m,rules:[{max:15,message:"Max is 15 Letter"}]})(f.a.createElement(g.a,null))),f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,"Primary")}),a("primary")(f.a.createElement(E.a,{checked:C,onChange:this.onChangeCheck},"Mark As Primary Plan ?"))),N,f.a.createElement(j,Object.assign({},F,{label:f.a.createElement("span",null,N.length<1?"Features":"")}),f.a.createElement(w.a,{type:"dashed",onClick:this.add,style:{width:"40%"}},f.a.createElement(v.a,{type:"plus"})," Add New Feature")),f.a.createElement(j,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},f.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"))),f.a.createElement(k.NotificationContainer,null))}}]),t}(m.Component),N=d.a.create()(S);t.default=N},634:function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var n=new Uint8Array(16);e.exports=function(){return a(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},635:function(e,t){for(var a=[],n=0;n<256;++n)a[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=a;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},637:function(e,t,a){var n=a(638),r=a(639),i=r;i.v1=n,i.v4=r,e.exports=i},638:function(e,t,a){var n,r,i=a(634),s=a(635),l=0,c=0;e.exports=function(e,t,a){var o=t&&a||0,u=t||[],p=(e=e||{}).node||n,m=void 0!==e.clockseq?e.clockseq:r;if(null==p||null==m){var f=i();null==p&&(p=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==m&&(m=r=16383&(f[6]<<8|f[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,g=d-l+(v-c)/1e4;if(g<0&&void 0===e.clockseq&&(m=m+1&16383),(g<0||d>l)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=d,c=v,r=m;var h=(1e4*(268435455&(d+=122192928e5))+v)%4294967296;u[o++]=h>>>24&255,u[o++]=h>>>16&255,u[o++]=h>>>8&255,u[o++]=255&h;var y=d/4294967296*1e4&268435455;u[o++]=y>>>8&255,u[o++]=255&y,u[o++]=y>>>24&15|16,u[o++]=y>>>16&255,u[o++]=m>>>8|128,u[o++]=255&m;for(var b=0;b<6;++b)u[o+b]=p[b];return t||s(u)}},639:function(e,t,a){var n=a(634),r=a(635);e.exports=function(e,t,a){var i=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var l=0;l<16;++l)t[i+l]=s[l];return t||r(s)}}}]);
//# sourceMappingURL=27.a3a9da4f.chunk.js.map