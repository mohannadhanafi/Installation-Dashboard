(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1220:function(e,t,n){"use strict";n.r(t);var a=n(186),r=n(17),o=n(18),i=n(21),c=n(19),s=n(20),l=n(0),u=n.n(l),f=n(25),d=n.n(f),p=(n(688),n(22)),h=n(613),m=n(644),g=n(614),v=n(622),b=n(45),y=n(14),w=n(627),S=n(1355),C=n(35),E=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={data:[],columns:[]},n.delete=function(e){d.a.delete("/api/v2/blogs",{data:{id:e}}).then(function(t){var a=t.data.message,r=t.statusText;if(200===t.status){var o=n.state.items.filter(function(t){return t.id!==e});n.setState(function(){return{items:o}},function(){C.NotificationManager.success(a,"SUCCESS",2e3)})}else C.NotificationManager.error(a||r,"ERROR",2e3)}).catch(function(e){var t=e.response,n=t.data.message,a=t.statusText;C.NotificationManager.error(n||a,"ERROR",2e3)})},n.clearFilters=function(){n.setState({filteredInfo:null})},n.componentWillMount=function(){d.a.get("/api/v2/blogs").then(function(e){var t=e.data,a=n.props.match.params.status;n.setState({columns:[{title:"Title",dataIndex:"title",key:"name",sorter:function(e,t){return e.title.props.children[0].length-t.title.props.children[0].length}},{title:"Auther",dataIndex:"user.first",key:"auther",sorter:function(e,t){return e.user.first.length-t.user.first.length}},{title:"Action",key:"action",dataIndex:"action",width:100}]});var r;n.props.role;t.map(function(e){return e.action=u.a.createElement("span",null,u.a.createElement(h.a,{to:"/admin/blogs/".concat(e.id),className:"icon icon-feedback"}),u.a.createElement(m.a,{type:"vertical"}),u.a.createElement(g.a,{title:"Are you sure delete this Blog?",onConfirm:function(){return n.delete(e.id)},okText:"Yes",cancelText:"No"},u.a.createElement("a",{className:"gx-mb-3 icon icon-trash",href:"/"})),u.a.createElement(m.a,{type:"vertical"})),e.title=u.a.createElement(h.a,{to:"/admin/blogs/".concat(e.id)},e.title.slice(0,50)," ..."),e}),"approved"===a.toLowerCase()?r=t.filter(function(e){return e.approve}):"notapproved"===a.toLowerCase()?r=t.filter(function(e){return!e.approve}):"all"===a.toLowerCase()?r=t:n.props.history.push("/admin/blogs/viewblogs/all"),n.setState(function(){return{data:r,items:r}})})},n.update=function(e){var t=e.id,a=e.approve;d.a.post("/api/v2/post/changeState",{id:t,approve:a}).then(function(e){var a=n.state.data,r=e.data.message;a.forEach(function(e){e.id===t&&(!1===e.approve?e.approve=!0:e.approve=!1)}),n.setState(function(){return{data:a}},function(){C.NotificationManager.success(r,"SUCCESS",2e3)})}).catch(function(e){n.setState({loading:!1},function(){var t=e.response,n=t.data.message,a=t.statusText;C.NotificationManager.error(n||a,"ERROR",2e3)})})},n.getColumnSearchProps=function(e){return{filterDropdown:function(e){var t=e.setSelectedKeys,a=e.selectedKeys,r=e.confirm,o=e.clearFilters;return u.a.createElement("div",{style:{padding:8}},u.a.createElement(v.a,{ref:function(e){n.searchInput=e},placeholder:a,value:a[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n.handleSearch(a,r)},style:{width:188,marginBottom:8,display:"block"}}),u.a.createElement(b.a,{type:"primary",onClick:function(){return n.handleSearch(a,r)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),u.a.createElement(b.a,{onClick:function(){return n.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return u.a.createElement(y.a,{type:"search",style:{backgroundColor:e?"#cccccc":void 0,color:e?"black":void 0}})},onFilter:function(t,n){if("object"===typeof n[e])return n[e].props.children.toString().toLowerCase().includes(t.toLowerCase());if(e.toString().includes(".")){var a=e.toString().split(".");return n[a[0]][a[1]].toString().toLowerCase().includes(t.toLowerCase())}return n[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return n.searchInput.select()})}}},n.handleSearch=function(e,t){t(),n.setState({searchText:e[0]})},n.handleReset=function(e){e(),n.setState({searchText:""})},n.onChange=function(e){var t=e.target,r=t.name,o=t.value;n.setState(Object(a.a)({},r,o));var i=n.state.data;0!==(i=i.filter(function(e){return-1!==e.title.props.children[0].toLowerCase().indexOf(o.toLowerCase())||-1!==e.user.name.toLowerCase().indexOf(o.toLowerCase())})).length?n.setState({items:i}):n.setState({items:null})},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.data,e.columns),n=e.items;return u.a.createElement(w.a,{title:"View Blogs"},u.a.createElement(v.a.Search,{style:{width:"30%"},onChange:this.onChange,placeholder:"Search  "}),u.a.createElement(S.a,Object.assign({className:"gx-table-responsive"},this.state,{columns:t,dataSource:n})),u.a.createElement(C.NotificationContainer,null))}}]),t}(u.a.Component);t.default=Object(p.b)(function(e){return{role:e.auth.role}})(E)},644:function(e,t,n){"use strict";var a=n(0),r=n(3),o=n.n(r),i=n(10);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n};t.a=function(e){return a.createElement(i.a,null,function(t){var n,r=t.getPrefixCls,i=e.prefixCls,u=e.type,f=void 0===u?"horizontal":u,d=e.orientation,p=void 0===d?"":d,h=e.className,m=e.children,g=e.dashed,v=l(e,["prefixCls","type","orientation","className","children","dashed"]),b=r("divider",i),y=p.length>0?"-"+p:p,w=o()(h,b,"".concat(b,"-").concat(f),(s(n={},"".concat(b,"-with-text").concat(y),m),s(n,"".concat(b,"-dashed"),!!g),n));return a.createElement("div",c({className:w},v),m&&a.createElement("span",{className:"".concat(b,"-inner-text")},m))})}},689:function(e,t){}}]);
//# sourceMappingURL=37.515e0473.chunk.js.map