(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1350:function(e,a,t){"use strict";t.r(a);var n=t(13),l=t.n(n),i=t(34),s=t(17),r=t(18),o=t(21),c=t(19),m=t(20),u=t(0),p=t.n(u),d=t(620),f=t(607),b=t(14),h=t(627),v=t(99),E=t(54),g=t(622),w=t(621),y=t(623),j=t(45),O=t(25),S=t.n(O),C=t(35),x=(t(918),d.a.Item),N=f.a.Option,F=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),m=0;m<n;m++)r[m]=arguments[m];return(t=Object(o.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[],name:"",email:"",rule:"",previewVisible:!1,previewImage:"",fileList:[],inputVisible:!1,fileName:"",pic:"",removedFile:[],bio:"",disable:!1},t.componentDidMount=Object(i.a)(l.a.mark(function e(){var a,n,i,s,r,o,c,m,u,p,d,f,b,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.props.match.params.id,e.next=3,S()("/api/v2/users/profile");case 3:if(a=e.sent,n=a.data,i=n.email,s=n.rule,r=n.pic,o=n.bio,c=n.password,m=n.mobile,u=n.address,p=n.first,d=n.last,f=n.jobtitle,b=n.username,h=[],""===r){e.next=10;break}return e.next=10,S.a.get("/api/v2/files/getFile/".concat(r)).then(function(){h.push({uid:"-1",name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(r)})}).catch(function(e){});case 10:t.setState({email:i,rule:s,pic:r,fileList:h,bio:o,password:c,mobile:m,address:u,first:p,last:d,jobtitle:f,username:b});case 11:case"end":return e.stop()}},e)})),t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFieldsAndScroll(function(e,a){var n=t.state,s=(n.fileList,n.removedFile),r=n.fileName;n.fullName;if(!e){t.setState({disable:!0});t.props.match.params.id;""!==r&&(a.pic=r),S.a.post("/api/v2/users/profile",{data:a}).then(function(e){var a=e.data.message,n=e.statusText;200===e.status?t.setState({loading:!1},function(){C.NotificationManager.success(a,"SUCCESS",2e3),setTimeout(function(){t.setState({disable:!1}),t.props.history.push("/admin/profile")},3e3),s.length&&s.map(function(){var e=Object(i.a)(l.a.mark(function e(a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/v2/files/removeFile",{pic:a});case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())}):(C.NotificationManager.error(a||n,"ERROR",2e3),setTimeout(function(){t.setState({disable:!1})},3e3))}).catch(function(e){var a=e.response,n=a.data.message,l=a.statusText;C.NotificationManager.error(n||l,"ERROR",2e3),setTimeout(function(){t.setState({disable:!1})},3e3)})}})},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,n){var l=t.props.form;a&&a!==l.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},t.validateToNextPassword=function(e,a,n){var l=t.props.form;a&&t.state.confirmDirty&&l.validateFields(["confirm"],{force:!0}),n()},t.handleWebsiteChange=function(e){var a;a=e?[".com",".org",".net"].map(function(a){return"".concat(e).concat(a)}):[],t.setState({autoCompleteResult:a})},t.handleCancel=function(){return t.setState({previewVisible:!1})},t.handlePreview=function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},t.removeFile=function(){var e=Object(i.a)(l.a.mark(function e(a){var n,i,s,r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.removedFile,(i=a.url)?(s=i.split("/"),r=s[s.length-1],n.push(r)):(o=a.response.fullName,n.push(o)),t.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.file,n=e.fileList;if(t.setState({fileList:n}),"done"===a.status){var l=a.response.fullName;t.setState({fileName:l})}},t}return Object(m.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.state,t=a.disable,n=a.email,l=a.rule,i=a.previewVisible,s=a.fileList,r=a.previewImage,o=(a.password,a.mobile),c=a.address,m=a.first,u=a.last,O=a.jobtitle,S=a.username,F={labelCol:{xs:{span:16},sm:{span:10}},wrapperCol:{xs:{span:16},sm:{span:12}}},T=p.a.createElement("div",null,p.a.createElement(b.a,{type:"plus"}),p.a.createElement("div",{className:"ant-upload-text"},"Upload"));return p.a.createElement(h.a,{className:"gx-card",title:"User Details      "},p.a.createElement(d.a,{onSubmit:this.handleSubmit,className:"add-user"},p.a.createElement(v.a,{justify:"center"},p.a.createElement(E.a,{span:18},p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"First Name")}),e("first",{initialValue:m,rules:[{max:50,message:"the name must be less than 50",whitespace:!0}]})(p.a.createElement(g.a,null))),p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Last Name")}),e("last",{initialValue:u,rules:[{max:50,message:"the lastname must be less than 50",whitespace:!0}]})(p.a.createElement(g.a,null))),p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Username")}),e("username",{initialValue:S,rules:[{max:50,message:"the username must be less than 50",whitespace:!0}]})(p.a.createElement(g.a,null))),"admin"===l?p.a.createElement(x,Object.assign({},F,{label:"E-mail"}),e("email",{initialValue:n,rules:[{type:"email",message:"The input is not valid E-mail!"}]})(p.a.createElement(g.a,{id:"email1",type:"email"}))):p.a.createElement(x,Object.assign({},F,{label:"E-mail"}),e("email",{initialValue:n,rules:[{type:"email",message:"The input is not valid E-mail!"}]})(p.a.createElement(g.a,{disabled:!0,id:"email1",type:"email"}))),"admin"===l?p.a.createElement(x,Object.assign({},F,{label:"Password"}),e("password",{rules:[{validator:this.validateToNextPassword},{pattern:"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$",message:"Passowrd must have at least one Numeric and one Character and length must be more than 4"}]})(p.a.createElement(g.a,{type:"password"}))):null,"admin"===l?p.a.createElement(x,Object.assign({},F,{label:"Confirm Password"}),e("confirm",{rules:[{validator:this.compareToFirstPassword}]})(p.a.createElement(g.a,{type:"password",onBlur:this.handleConfirmBlur}))):null,"admin"===l?p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Role")}),e("rule",{initialValue:l})(p.a.createElement(f.a,{disabled:!0,defaultValue:"admin"},p.a.createElement(N,{value:"admin"},"Admin"),p.a.createElement(N,{value:"Data Entery"},"Data Entery")))):null,p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Mobile Number")}),e("mobile",{initialValue:o})(p.a.createElement(g.a,null))),p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Job Title")}),e("jobtitle",{initialValue:O})(p.a.createElement(g.a,null))),p.a.createElement(x,Object.assign({},F,{label:p.a.createElement("span",null,"Address")}),e("address",{initialValue:c})(p.a.createElement(g.a,null))),p.a.createElement(x,null)),p.a.createElement(E.a,{span:6,className:"addUser-image"}," ",p.a.createElement(x,Object.assign({},F,{label:""}),p.a.createElement(w.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:s,onPreview:this.handlePreview,onChange:this.handleChange,withCredentials:!0,onRemove:this.removeFile},1===s.length?null:T),p.a.createElement(y.a,{visible:i,footer:null,onCancel:this.handleCancel},p.a.createElement("img",{alt:"example",style:{width:"100%"},src:r}))))),p.a.createElement(x,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},t?p.a.createElement(j.a,{disabled:!0,type:"primary",htmlType:"submit"},"Save"):p.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Save"))),p.a.createElement(C.NotificationContainer,null))}}]),a}(u.Component),T=d.a.create()(F);a.default=T},918:function(e,a,t){}}]);
//# sourceMappingURL=50.acbebc6f.chunk.js.map