(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1029:function(e,a,t){"use strict";t.r(a);var n=t(13),s=t.n(n),l=t(34),i=t(17),r=t(18),c=t(21),o=t(19),m=t(20),u=t(0),p=t.n(u),d=t(620),f=t(607),h=t(622),b=t(14),v=t(627),E=t(99),g=t(54),w=t(621),y=t(623),j=t(45),O=t(25),C=t.n(O),x=t(35),N=(t(1030),d.a.Item),S=f.a.Option,F=(h.a.TextArea,function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),m=0;m<n;m++)r[m]=arguments[m];return(t=Object(c.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[],name:"",email:"",rule:"",previewVisible:!1,previewImage:"",fileList:[],inputVisible:!1,fileName:"",pic:"",removedFile:[],bio:"",disable:!1},t.componentDidMount=Object(l.a)(s.a.mark(function e(){var a,n,l,i,r,c,o,m,u,p,d,f,h,b,v;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.next=3,C()("/api/v2/users/".concat(a),{params:{id:a}});case 3:if(n=e.sent,l=n.data,i=l.email,r=l.rule,c=l.pic,o=l.bio,m=l.password,u=l.mobile,p=l.address,d=l.first,f=l.last,h=l.jobtitle,b=l.username,v=[],""===c){e.next=10;break}return e.next=10,C.a.get("/api/v2/files/getFile/".concat(c)).then(function(){v.push({uid:"-1",name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(c)})}).catch(function(e){});case 10:t.setState({email:i,rule:r,pic:c,fileList:v,bio:o,password:m,mobile:u,address:p,first:d,last:f,jobtitle:h,username:b});case 11:case"end":return e.stop()}},e)})),t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFieldsAndScroll(function(e,a){var n=t.state,i=n.fileList,r=n.removedFile,c=n.fileName;if(!e){t.setState({disable:!0});var o=t.props.match.params.id;""!==c&&(a.pic=c),i.length?C.a.post("/api/v2/users/update",{data:a,params:{id:o}}).then(function(e){var a=e.data.message,n=e.statusText;200===e.status?t.setState({loading:!1},function(){x.NotificationManager.success(a,"SUCCESS",2e3),setTimeout(function(){t.setState({disable:!1}),t.props.history.push("/admin/users/view")},3e3),r.length&&r.map(function(){var e=Object(l.a)(s.a.mark(function e(a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/api/v2/files/removeFile",{pic:a});case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}())}):x.NotificationManager.error(a||n,"ERROR",2e3)}).catch(function(e){var a=e.response,t=a.data.message,n=a.statusText;x.NotificationManager.error(t||n,"ERROR",2e3)}):x.NotificationManager.error("Please Choose an image !","ERROR",2e3)}})},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,n){var s=t.props.form;a&&a!==s.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},t.validateToNextPassword=function(e,a,n){var s=t.props.form;a&&t.state.confirmDirty&&s.validateFields(["confirm"],{force:!0}),n()},t.handleWebsiteChange=function(e){var a;a=e?[".com",".org",".net"].map(function(a){return"".concat(e).concat(a)}):[],t.setState({autoCompleteResult:a})},t.handleCancel=function(){return t.setState({previewVisible:!1})},t.handlePreview=function(e){t.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},t.removeFile=function(){var e=Object(l.a)(s.a.mark(function e(a){var n,l,i,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.removedFile,(l=a.url)?(i=l.split("/"),r=i[i.length-1],n.push(r)):(c=a.response.fullName,n.push(c)),t.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.file,n=e.fileList;if(t.setState({fileList:n}),"done"===a.status){var s=a.response.fullName;t.setState({fileName:s})}},t}return Object(m.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.state,t=a.disable,n=a.email,s=a.rule,l=a.previewVisible,i=a.fileList,r=a.pic,c=(a.password,a.mobile),o=a.address,m=a.first,u=a.last,O=a.jobtitle,C=a.username,F={labelCol:{xs:{span:16},sm:{span:10}},wrapperCol:{xs:{span:16},sm:{span:12}}},V=p.a.createElement("div",null,p.a.createElement(b.a,{type:"plus"}),p.a.createElement("div",{className:"ant-upload-text"},"Upload"));return p.a.createElement(v.a,{className:"gx-card",title:"Edit User"},p.a.createElement(d.a,{onSubmit:this.handleSubmit,className:"add-user"},p.a.createElement(E.a,{justify:"center"},p.a.createElement(g.a,{span:18},p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"First Name")}),e("first",{initialValue:m,rules:[{max:50,message:"the name must be less than 50",whitespace:!0}]})(p.a.createElement(h.a,null))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Last Name")}),e("last",{initialValue:u,rules:[{max:50,message:"the lastname must be less than 50",whitespace:!0}]})(p.a.createElement(h.a,null))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Username")}),e("username",{initialValue:C,rules:[{max:50,message:"the username must be less than 50",whitespace:!0}]})(p.a.createElement(h.a,null))),p.a.createElement(N,Object.assign({},F,{label:"E-mail"}),e("email",{initialValue:n,rules:[{type:"email",message:"The input is not valid E-mail!"}]})(p.a.createElement(h.a,{id:"email1",type:"email"}))),p.a.createElement(N,Object.assign({},F,{label:"Password"}),e("password",{rules:[{validator:this.validateToNextPassword},{pattern:"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$",message:"Passowrd must have at least one Numeric and one Character and length must be more than 4"}]})(p.a.createElement(h.a,{type:"password"}))),p.a.createElement(N,Object.assign({},F,{label:"Confirm Password"}),e("confirm",{rules:[{validator:this.compareToFirstPassword}]})(p.a.createElement(h.a,{type:"password",onBlur:this.handleConfirmBlur}))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Role")}),e("rule",{initialValue:s})(p.a.createElement(f.a,{defaultValue:"admin"},p.a.createElement(S,{value:"admin"},"Admin"),p.a.createElement(S,{value:"Data Entery"},"Data Entery")))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Mobile Number")}),e("mobile",{initialValue:c})(p.a.createElement(h.a,null))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Job Title")}),e("jobtitle",{initialValue:O})(p.a.createElement(h.a,null))),p.a.createElement(N,Object.assign({},F,{label:p.a.createElement("span",null,"Address")}),e("address",{initialValue:o})(p.a.createElement(h.a,null))),p.a.createElement(N,null)),p.a.createElement(g.a,{span:6,className:"addUser-image"}," ",p.a.createElement(N,Object.assign({},F,{label:""}),p.a.createElement(w.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handleChange,withCredentials:!0,onRemove:this.removeFile},1===i.length?null:V),p.a.createElement(y.a,{visible:l,footer:null,onCancel:this.handleCancel},p.a.createElement("img",{alt:"example",style:{width:"100%"},src:"/api/v2/files/getFile/".concat(r)}))))),p.a.createElement(N,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},t?p.a.createElement(j.a,{disabled:!0,type:"primary",htmlType:"submit"},"Save"):p.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Save"))),p.a.createElement(x.NotificationContainer,null))}}]),a}(u.Component)),V=d.a.create()(F);a.default=V},1030:function(e,a,t){}}]);
//# sourceMappingURL=54.d98919a2.chunk.js.map