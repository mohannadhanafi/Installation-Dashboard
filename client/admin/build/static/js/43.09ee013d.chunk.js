(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1284:function(e,t,n){"use strict";n.r(t);var i=n(13),a=n.n(i),o=n(34),r=n(17),s=n(18),l=n(21),c=n(19),u=n(20),p=n(0),f=n.n(p),d=n(22),m=n(620),h=n(622),g=n(14),v=n(627),b=n(621),y=n(623),C=n(45),w=n(25),E=n.n(w),O=n(642),j=n(35),S=m.a.Item,x=h.a.TextArea,k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={confirmDirty:!1,autoCompleteResult:[],fileList:[],previewVisible:!1,previewImage:"",tags:[],inputVisible:!1,categories:[],fileName:"",content:"",removedFile:[],heroLength:"",inputValue:"",mode:"time",breaking:!1,disable:!1},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){n.setState({disable:!0});var i=n.state,r=i.fileList,s=i.removedFile,l=i.content,c=[];r.map(function(e){return c.push(e.response.fullName),c}),0!==c.length?l.trim()?(t.image=c[0],t.body=l,E.a.post("/api/v2/hero",t).then(function(e){var t=e.data.message;j.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){n.props.history.push("/admin/hero/view"),n.setState({disable:!1})},3e3),s.length&&s.map(function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){var e=Object(o.a)(a.a.mark(function e(t){var i,o,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.response,o=i.data.message,r=i.statusText,j.NotificationManager.error(o||r,"ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):(j.NotificationManager.error("Please enter the body!","ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3)):(j.NotificationManager.error("Please Choose an image !","ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3))}})},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.handleEditorChange=function(e){var t=e.target.getContent();n.setState(function(){return{content:t}})},n.removeFile=function(){var e=Object(o.a)(a.a.mark(function e(t){var i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.state.removedFile,o=t.response.fullName,i.push(o),n.setState({removedFile:i});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){var t=e.file,i=e.fileList,a="image/jpeg"===t.type,o="image/png"===t.type,r=t.size/1024/1024<2;if(a||o)if(r){if(n.setState({fileList:i}),"done"===t.status){var s=t.response.fullName;n.setState({fileName:s})}}else j.NotificationManager.error("Image must smaller than 2MB!","ERROR",2e3);else j.NotificationManager.error("You can only upload image files!","ERROR",2e3)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,n=t.previewVisible,i=t.fileList,a=t.previewImage,o=t.disable,r=f.a.createElement("div",null,f.a.createElement(g.a,{type:"plus"}),f.a.createElement("div",{className:"ant-upload-text"},"Upload")),s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return f.a.createElement(v.a,{className:"gx-card",title:"Add Hero"},f.a.createElement(m.a,{onSubmit:this.handleSubmit},f.a.createElement(S,Object.assign({},s,{label:f.a.createElement("span",null,"Header Photo")}),f.a.createElement(f.a.Fragment,null,f.a.createElement(b.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile},1===i.length?null:r),f.a.createElement(y.a,{visible:n,footer:null,onCancel:this.handleCancel},f.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))),f.a.createElement(S,Object.assign({},s,{label:f.a.createElement("span",null,"Title")}),e("title",{rules:[{required:!0,message:"Please input your title!",whitespace:!0},{max:80,message:"Max is 80 letter !",whitespace:!0}]})(f.a.createElement(h.a,null))),f.a.createElement(S,Object.assign({},s,{label:f.a.createElement("span",null,"Call To Action")}),e("cta",{rules:[{required:!0,message:"Please input your cta!",whitespace:!0}]})(f.a.createElement(h.a,null))),f.a.createElement(S,Object.assign({},s,{label:f.a.createElement("span",null,"Description")}),e("description",{rules:[{required:!0,message:"Please input your description!",whitespace:!0},{max:100,message:"Max is 100 letter !",whitespace:!0}]})(f.a.createElement(x,{rows:4,maxLength:"300"}))),f.a.createElement(S,Object.assign({},s,{label:f.a.createElement("span",null,"Body")}),f.a.createElement(O.a,{init:{images_upload_url:"/api/v2/files/uploadFile",images_upload_base_path:"/api/v2/files/uploadFile",image_caption:!0,images_upload_handler:function(e,t,n){var i=new FormData;i.append("file",e.blob()),E.a.post("/api/v2/files/uploadFile",i).then(function(e){var n=e.data.fullName;t("/api/v2/files/getFile/".concat(n))}).catch(function(e){n("error !")})},height:500,image_title:!0,automatic_uploads:!0,file_picker_types:"file image media",images_upload_credentials:!0,plugins:"print preview fullpage powerpaste searchreplace autolink directionality advcode visualblocks visualchars fullscreen image link media mediaembed template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount tinymcespellchecker a11ychecker imagetools textpattern help formatpainter permanentpen pageembed mentions linkchecker",toolbar:"formatselect | bold italic strikethrough forecolor backcolor permanentpen formatpainter | link image media pageembed | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent | removeformat | addcomment"},onChange:this.handleEditorChange})),f.a.createElement(S,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},o?f.a.createElement(C.a,{type:"primary",disabled:!0,htmlType:"submit"},"Submit"):f.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Submit"))),f.a.createElement(j.NotificationContainer,null))}}]),t}(p.Component),R=m.a.create()(k);t.default=Object(d.b)(function(e){var t=e.auth;return{authUser:t.authUser,url:t.url,role:t.role}})(R)},642:function(e,t,n){"use strict";var i=n(0),a=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func},s=o({apiKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string},r),l=function(e){return"function"===typeof e},c=0,u=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++c+String(t)},p=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},f=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},d=function(e,t){return f(e).concat(f(t))},m=n(643),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},v={listeners:[],scriptId:u("tiny-script"),scriptLoaded:!1},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t.initialise=function(){var e=g({},t.props.init,{target:t.element,readonly:t.props.disabled,inline:t.inline,plugins:d(t.props.init&&t.props.init.plugins,t.props.plugins),toolbar:t.props.toolbar||t.props.init&&t.props.init.toolbar,setup:function(e){t.editor=e,e.on("init",function(n){t.initEditor(n,e)}),t.props.init&&"function"===typeof t.props.init.setup&&t.props.init.setup(e)}});p(t.element)&&(t.element.style.visibility=""),Object(m.a)().init(e)},t}return h(t,e),t.prototype.componentWillMount=function(){this.id=this.id||this.props.id||u("tiny-react"),this.inline=this.props.inline?this.props.inline:this.props.init&&this.props.init.inline},t.prototype.componentDidMount=function(){if(null!==Object(m.a)())this.initialise();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.props.cloudChannel,n=this.props.apiKey?this.props.apiKey:"";!function(e,t,n,i){e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||function(e,t,n,i){var a=t.createElement("script");a.type="application/javascript",a.id=e,a.addEventListener("load",i),a.src=n,t.head&&t.head.appendChild(a)}(e.scriptId,t,n,function(){e.listeners.forEach(function(e){return e()}),e.scriptLoaded=!0}))}(v,e,"https://cloud.tinymce.com/"+t+"/tinymce.min.js?apiKey="+n,this.initialise)}},t.prototype.componentWillUnmount=function(){null!==Object(m.a)()&&Object(m.a)().remove(this.editor)},t.prototype.componentWillReceiveProps=function(e){this.editor&&this.editor.initialized&&(this.currentContent=this.currentContent||this.editor.getContent(),"string"===typeof e.value&&e.value!==this.props.value&&e.value!==this.currentContent&&this.editor.setContent(e.value),"boolean"===typeof e.disabled&&e.disabled!==this.props.disabled&&this.editor.setMode(e.disabled?"readonly":"design"))},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.initEditor=function(e,t){var n=this,i="string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:"";t.setContent(i),l(this.props.onEditorChange)&&t.on("change keyup setcontent",function(e){n.currentContent=t.getContent(),l(n.props.onEditorChange)&&n.props.onEditorChange(n.currentContent)}),function(e,t,n){var i;Object.keys(e).filter((i=Object.keys(r),function(e){return-1!==i.indexOf(e)})).forEach(function(i){var a=e[i];l(a)&&("onInit"===i?a(n,t):t.on(i.substring(2),function(e){return a(e,t)}))})}(this.props,t,e)},t.prototype.renderInline=function(){var e=this,t=this.props.tagName,n=void 0===t?"div":t;return i.createElement(n,{ref:function(t){return e.element=t},id:this.id})},t.prototype.renderIframe=function(){var e=this;return i.createElement("textarea",{ref:function(t){return e.element=t},style:{visibility:"hidden"},id:this.id,name:this.props.textareaName})},t.propTypes=s,t.defaultProps={cloudChannel:"5"},t}(i.Component);n.d(t,"a",function(){return b})},643:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=function(){return"undefined"!==typeof window?window:e},a=function(){var e=i();return e&&e.tinymce?e.tinymce:null}}).call(this,n(61))}}]);
//# sourceMappingURL=43.09ee013d.chunk.js.map