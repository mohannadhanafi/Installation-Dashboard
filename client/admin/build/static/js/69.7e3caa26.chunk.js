(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1026:function(e,t,a){"use strict";a.r(t);var n=a(186),r=a(23),i=a(17),c=a(18),o=a(21),l=a(19),s=a(20),u=a(0),d=a.n(u),f=a(25),m=a.n(f),h=a(613),p=a(50),g=a.n(p),v=a(89),y=a.n(v),w=a(644),b=a(614),C=a(622),S=a(45),E=a(14),x=a(627),O=a(1355),N=a(35),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={data:[],columns:[],items:[]},a.delete=function(e,t){m.a.delete("/api/v2/users/delete",{data:{id:e,rule:t}}).then(function(t){var n=t.data.message;N.NotificationManager.success(n,"SUCCESS",2e3),setTimeout(function(){var t=a.state.data.filter(function(t){return t.id!==e});a.setState({data:t})},500)}).catch(function(){N.NotificationManager.error("You can not delete the admin","ERROR",2e3)})},a.componentDidMount=function(){var e=a.state,t=e.sortedInfo,n=e.filteredInfo;t=t||{},n=n||{};var i,c=g.a.get("jwt");if(c)try{var o=y()(c);i=o.id}catch(l){i=null}else i=null;m.a.get("/api/v2/users/").then(function(e){var t=e.data,n=[Object(r.a)({title:"Name",dataIndex:"first",key:"first"},a.getColumnSearchProps("first"),{sorter:function(e,t){return e.first.length-t.first.length},render:function(e,t){return d.a.createElement("div",{className:"gx-flex-row gx-align-items-center"},d.a.createElement("img",{className:"gx-rounded-circle gx-size-30 gx-mr-2",src:"/api/v2/files/getFile/".concat(t.pic),alt:""}),d.a.createElement("p",{className:"gx-mb-0"},"".concat(t.first," ").concat(t.last)))}}),{title:"Email",dataIndex:"email",key:"email",sorter:function(e,t){return e.email.length-t.email.length}},{title:"Rule",dataIndex:"rule",key:"rule"},{title:"Action",key:"action",width:100,dataIndex:"action"}];a.setState({columns:n}),t.map(function(e){return e.action=d.a.createElement("span",null,i===e.id?d.a.createElement(h.a,{to:"/admin/profile",className:"icon icon-feedback"}):d.a.createElement(h.a,{to:"/admin/users/".concat(e.id),className:"icon icon-feedback"}),d.a.createElement(w.a,{type:"vertical"}),d.a.createElement(b.a,{title:"Are you sure delete this task?",onConfirm:function(){return a.delete(e.id,e.rule)},okText:"Yes",cancelText:"No"},d.a.createElement("a",{className:"gx-mb-3 icon icon-trash",href:"/"}))),e.name=d.a.createElement(h.a,{to:"/admin/users/".concat(e.id)},e.name),e}),a.setState(function(){return{data:t,items:t}})})},a.delete=function(e,t){m.a.delete("/api/v2/users",{data:{id:e,rule:t}}).then(function(t){var n=t.data.message;N.NotificationManager.success(n,"SUCCESS",2e3),setTimeout(function(){var t=a.state.data.filter(function(t){return t.id!==e});a.setState({data:t,items:t})},500)}).catch(function(){N.NotificationManager.error("You can not delete the admin","ERROR",2e3)})},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,c=t.clearFilters;return d.a.createElement("div",{style:{padding:8}},d.a.createElement(C.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,i)},style:{width:188,marginBottom:8,display:"block"}}),d.a.createElement(S.a,{type:"primary",onClick:function(){return a.handleSearch(r,i)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),d.a.createElement(S.a,{onClick:function(){return a.handleReset(c)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return d.a.createElement(E.a,{type:"search",style:{backgroundColor:e?"#cccccc":void 0,color:e?"black":void 0}})},onFilter:function(t,a){return"object"===typeof a[e]?a[e].props.children.toString().toLowerCase().includes(t.toLowerCase()):a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})}}},a.handleSearch=function(e,t){t(),a.setState({searchText:e[0]})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.onChange=function(e){var t=e.target,r=t.first,i=t.value;a.setState(Object(n.a)({},r,i));var c=a.state.data;0!==(c=c.filter(function(e){return-1!==e.first.toLowerCase().indexOf(i.toLowerCase())||-1!==e.last.toLowerCase().indexOf(i.toLowerCase())||-1!==e.email.toLowerCase().indexOf(i.toLowerCase())})).length?a.setState({items:c}):a.setState({items:null})},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.data,e.columns),a=e.items;return d.a.createElement(x.a,{title:"Users List"},d.a.createElement(C.a.Search,{style:{width:"30%"},onChange:this.onChange,placeholder:"Search "}),d.a.createElement(O.a,{className:"gx-table-responsive",columns:t,dataSource:a}),d.a.createElement(N.NotificationContainer,null))}}]),t}(d.a.Component);t.default=k},644:function(e,t,a){"use strict";var n=a(0),r=a(3),i=a.n(r),c=a(10);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};t.a=function(e){return n.createElement(c.a,null,function(t){var a,r=t.getPrefixCls,c=e.prefixCls,u=e.type,d=void 0===u?"horizontal":u,f=e.orientation,m=void 0===f?"":f,h=e.className,p=e.children,g=e.dashed,v=s(e,["prefixCls","type","orientation","className","children","dashed"]),y=r("divider",c),w=m.length>0?"-"+m:m,b=i()(h,y,"".concat(y,"-").concat(d),(l(a={},"".concat(y,"-with-text").concat(w),p),l(a,"".concat(y,"-dashed"),!!g),a));return n.createElement("div",o({className:b},v),p&&n.createElement("span",{className:"".concat(y,"-inner-text")},p))})}}}]);
//# sourceMappingURL=69.7e3caa26.chunk.js.map