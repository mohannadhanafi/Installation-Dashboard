(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1285:function(e,t,n){"use strict";n.r(t);var i=n(13),a=n.n(i),o=n(34),r=n(17),s=n(18),c=n(21),l=n(19),u=n(20),p=n(0),f=n.n(p),d=n(620),m=n(607),h=n(622),g=n(14),v=n(627),b=n(621),y=n(623),C=n(45),E=n(25),w=n.n(E),O=n(642),S=n(35),j=d.a.Item,x=(m.a.Option,h.a.TextArea),k=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={confirmDirty:!1,autoCompleteResult:[],name:"",email:"",rule:"",previewVisible:!1,previewImage:"",fileList:[],inputVisible:!1,fileName:"",pic:"",removedFile:[],bio:"",content:"",disable:!1},n.componentDidMount=Object(o.a)(a.a.mark(function e(){var t,i,o,r,s,c,l,u,p,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,e.next=3,w()("/api/v2/hero/".concat(t),{params:{id:t}});case 3:if(i=e.sent,o=i.data,r=o[0],s=r.cta,c=r.description,l=r.title,u=r.image,p=r.body,f=[],""===u){e.next=10;break}return e.next=10,w.a.get("/api/v2/files/getFile/".concat(u)).then(function(){f.push({uid:"-1",name:"image.png",status:"done",url:"/api/v2/files/getFile/".concat(u)})}).catch(function(e){});case 10:n.setState({cta:s,description:c,title:l,pic:u,fileList:f,content:p});case 11:case"end":return e.stop()}},e)})),n.handleEditorChange=function(e){var t=e.target.getContent();n.setState(function(){return{content:t}})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){var i=n.state,r=i.fileName,s=i.fileList,c=i.removedFile;if(!e){n.setState({disable:!0});var l=n.props.match.params.id;if(""!==r&&(t.image=r),s.length){var u=n.state.content;t.body=u,w.a.post("/api/v2/hero/update/".concat(l),t).then(function(e){var t=e.data.message,i=e.statusText;200===e.status?n.setState({loading:!1},function(){S.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){n.props.history.push("/admin/hero/view"),n.setState({disable:!1})},3e3),c.length&&c.map(function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}):(S.NotificationManager.error(t||i,"ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3))}).catch(function(e){var t=e.response,i=t.data.message,a=t.statusText;S.NotificationManager.error(i||a,"ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3)})}else S.NotificationManager.error("Please Choose an image !","ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3)}})},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.removeFile=function(){var e=Object(o.a)(a.a.mark(function e(t){var i,o,r,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.state.removedFile,(o=t.url)?(r=o.split("/"),s=r[r.length-1],i.push(s)):(c=t.response.fullName,i.push(c)),n.setState({removedFile:i});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){var t=e.file,i=e.fileList;if(n.setState({fileList:i}),"done"===t.status){var a=t.response.fullName;n.setState({fileName:a})}},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,n=t.previewVisible,i=t.fileList,a=t.previewImage,o=t.cta,r=t.description,s=t.title,c=(t.pic,t.content),l=t.disable,u={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},p=f.a.createElement("div",null,f.a.createElement(g.a,{type:"plus"}),f.a.createElement("div",{className:"ant-upload-text"},"Upload"));return f.a.createElement(v.a,{className:"gx-card",title:"Edit Hero Details"},f.a.createElement(d.a,{onSubmit:this.handleSubmit},f.a.createElement(j,Object.assign({},u,{label:f.a.createElement("span",null,"Upload Header Photo")}),f.a.createElement(f.a.Fragment,null,f.a.createElement(b.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile},1===i.length?null:p),f.a.createElement(y.a,{visible:n,footer:null,onCancel:this.handleCancel},f.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))),f.a.createElement(j,Object.assign({},u,{label:f.a.createElement("span",null,"Title")}),e("title",{initialValue:s,rules:[{max:80,message:"Max is 80 letter !",whitespace:!0}]})(f.a.createElement(h.a,null))),f.a.createElement(j,Object.assign({},u,{label:f.a.createElement("span",null,"Call To Action")}),e("cta",{initialValue:o})(f.a.createElement(h.a,null))),f.a.createElement(j,Object.assign({},u,{label:f.a.createElement("span",null,"Description")}),e("description",{initialValue:r,rules:[{max:100,message:"Max is 100 letter !",whitespace:!0}]})(f.a.createElement(x,{rows:4,maxLength:300}))),c.length?f.a.createElement(j,Object.assign({},u,{label:f.a.createElement("span",null,"Body")}),f.a.createElement(O.a,{initialValue:c,init:{images_upload_url:"/api/v2/files/uploadFile",images_upload_base_path:"/api/v2/files/uploadFile",image_caption:!0,images_upload_handler:function(e,t,n){var i=new FormData;i.append("file",e.blob()),w.a.post("/api/v2/files/uploadFile",i).then(function(e){var n=e.data.fullName;t("/api/v2/files/getFile/".concat(n))}).catch(function(e){n("error !")})},height:500,image_title:!0,automatic_uploads:!0,file_picker_types:"file image media",images_upload_credentials:!0,plugins:"print preview fullpage powerpaste searchreplace autolink directionality advcode visualblocks visualchars fullscreen image link media mediaembed template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount tinymcespellchecker a11ychecker imagetools textpattern help formatpainter permanentpen pageembed mentions linkchecker",toolbar:"formatselect | bold italic strikethrough forecolor backcolor permanentpen formatpainter | link image media pageembed | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent | removeformat | addcomment"},onChange:this.handleEditorChange})):null,f.a.createElement(j,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},l?f.a.createElement(C.a,{type:"primary",disabled:!0,htmlType:"submit"},"Save"):f.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Save"))),f.a.createElement(S.NotificationContainer,null))}}]),t}(p.Component),D=d.a.create()(k);t.default=D},642:function(e,t,n){"use strict";var i=n(0),a=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func},s=o({apiKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string},r),c=function(e){return"function"===typeof e},l=0,u=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++l+String(t)},p=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},f=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},d=function(e,t){return f(e).concat(f(t))},m=n(643),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},v={listeners:[],scriptId:u("tiny-script"),scriptLoaded:!1},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t.initialise=function(){var e=g({},t.props.init,{target:t.element,readonly:t.props.disabled,inline:t.inline,plugins:d(t.props.init&&t.props.init.plugins,t.props.plugins),toolbar:t.props.toolbar||t.props.init&&t.props.init.toolbar,setup:function(e){t.editor=e,e.on("init",function(n){t.initEditor(n,e)}),t.props.init&&"function"===typeof t.props.init.setup&&t.props.init.setup(e)}});p(t.element)&&(t.element.style.visibility=""),Object(m.a)().init(e)},t}return h(t,e),t.prototype.componentWillMount=function(){this.id=this.id||this.props.id||u("tiny-react"),this.inline=this.props.inline?this.props.inline:this.props.init&&this.props.init.inline},t.prototype.componentDidMount=function(){if(null!==Object(m.a)())this.initialise();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.props.cloudChannel,n=this.props.apiKey?this.props.apiKey:"";!function(e,t,n,i){e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||function(e,t,n,i){var a=t.createElement("script");a.type="application/javascript",a.id=e,a.addEventListener("load",i),a.src=n,t.head&&t.head.appendChild(a)}(e.scriptId,t,n,function(){e.listeners.forEach(function(e){return e()}),e.scriptLoaded=!0}))}(v,e,"https://cloud.tinymce.com/"+t+"/tinymce.min.js?apiKey="+n,this.initialise)}},t.prototype.componentWillUnmount=function(){null!==Object(m.a)()&&Object(m.a)().remove(this.editor)},t.prototype.componentWillReceiveProps=function(e){this.editor&&this.editor.initialized&&(this.currentContent=this.currentContent||this.editor.getContent(),"string"===typeof e.value&&e.value!==this.props.value&&e.value!==this.currentContent&&this.editor.setContent(e.value),"boolean"===typeof e.disabled&&e.disabled!==this.props.disabled&&this.editor.setMode(e.disabled?"readonly":"design"))},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.initEditor=function(e,t){var n=this,i="string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:"";t.setContent(i),c(this.props.onEditorChange)&&t.on("change keyup setcontent",function(e){n.currentContent=t.getContent(),c(n.props.onEditorChange)&&n.props.onEditorChange(n.currentContent)}),function(e,t,n){var i;Object.keys(e).filter((i=Object.keys(r),function(e){return-1!==i.indexOf(e)})).forEach(function(i){var a=e[i];c(a)&&("onInit"===i?a(n,t):t.on(i.substring(2),function(e){return a(e,t)}))})}(this.props,t,e)},t.prototype.renderInline=function(){var e=this,t=this.props.tagName,n=void 0===t?"div":t;return i.createElement(n,{ref:function(t){return e.element=t},id:this.id})},t.prototype.renderIframe=function(){var e=this;return i.createElement("textarea",{ref:function(t){return e.element=t},style:{visibility:"hidden"},id:this.id,name:this.props.textareaName})},t.propTypes=s,t.defaultProps={cloudChannel:"5"},t}(i.Component);n.d(t,"a",function(){return b})},643:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=function(){return"undefined"!==typeof window?window:e},a=function(){var e=i();return e&&e.tinymce?e.tinymce:null}}).call(this,n(61))}}]);
//# sourceMappingURL=44.b84288b3.chunk.js.map