(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1251:function(e,t,n){"use strict";n.r(t);var i=n(647),a=n(13),o=n.n(a),r=n(34),s=n(17),l=n(18),c=n(21),u=n(19),p=n(20),f=n(187),d=n(0),m=n.n(d),h=n(22),g=n(620),v=n(622),b=n(14),y=n(627),C=n(69),w=n(621),E=n(623),O=n(45),S=n(25),j=n.n(S),k=n(35),x=n(642),P=g.a.Item,R=v.a.TextArea,D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),p=0;p<a;p++)l[p]=arguments[p];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={confirmDirty:!1,autoCompleteResult:[],fileList:[],previewVisible:!1,previewImage:"",tags:[],inputVisible:!1,categories:[],fileName:"",content:"",removedFile:[],heroLength:"",inputValue:"",mode:"time",breaking:!1,disable:!1},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,t){if(!e){n.setState({disable:!0});var i=n.state,a=i.fileList,s=i.removedFile,l=[];if(a.map(function(e){return l.push(e.response.fullName),l}),0!==l.length){var c=n.state.content;c.trim()?(t.description=c,t.header_media=l,j.a.post("/api/v2/blogs",t).then(function(e){var i=e.data.message;t.newsLetter?(k.NotificationManager.success("Post has been added, redirect to email list","SUCCESS",2e3),setTimeout(function(){n.setState({disable:!1})},2e3)):(k.NotificationManager.success(i,"SUCCESS",2e3),setTimeout(function(){n.props.history.push("/admin/blogs/viewblogs/all"),n.setState({disable:!1})},3e3)),s.length&&s.map(function(){var e=Object(r.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){var e=Object(r.a)(o.a.mark(function e(t){var i,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.response,a=i.data.message,r=i.statusText,k.NotificationManager.error(a||r,"ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):(k.NotificationManager.error("Please Add details for the post","ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3))}else k.NotificationManager.error("Please Choose image or video !","ERROR",2e3),setTimeout(function(){n.setState({disable:!1})},2e3)}})},n.handleConfirmBlur=function(e){var t=e.target.value;n.setState({confirmDirty:n.state.confirmDirty||!!t})},n.compareToFirstPassword=function(e,t,i){var a=n.props.form;t&&t!==a.getFieldValue("password")?i("Two passwords that you enter is inconsistent!"):i()},n.validateToNextPassword=function(e,t,i){var a=n.props.form;t&&n.state.confirmDirty&&a.validateFields(["confirm"],{force:!0}),i()},n.handleWebsiteChange=function(e){var t;t=e?[".com",".org",".net"].map(function(t){return"".concat(e).concat(t)}):[],n.setState({autoCompleteResult:t})},n.handleEditorChange=function(e){var t=e.target.getContent();n.setState(function(){return{content:t}})},n.onEditorStateChange=function(e){n.setState({editorState:e})},n.handlePreview=function(e){n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.removeFile=function(){var e=Object(r.a)(o.a.mark(function e(t){var i,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.state.removedFile,a=t.response.fullName,i.push(a),n.setState({removedFile:i});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){var t=e.file,i=e.fileList,a="image/jpeg"===t.type,o="image/png"===t.type,r=t.size/1024/1024<2;if(a||o)if(r){if(n.setState({fileList:i}),"done"===t.status){var s=t.response.fullName;n.setState({fileName:s})}}else k.NotificationManager.error("Image must smaller than 2MB!","ERROR",2e3);else k.NotificationManager.error("You can only upload image files!","ERROR",2e3)},n.showInput=function(){n.setState({inputVisible:!0},function(){return n.input.focus()})},n.handleClose=function(e){var t=n.state.tags.filter(function(t){return t!==e});n.setState({tags:t})},n.saveInputRef=function(e){return n.input=e},n.handleInputChange=function(e){n.setState({inputValue:e.target.value})},n.handleInputConfirm=function(){var e=Object(f.a)(Object(f.a)(n)).state,t=e.inputValue,a=e.tags;t&&-1===a.indexOf(t)&&(a=[].concat(Object(i.a)(a),[t])),n.setState({tags:a,inputVisible:!1,inputValue:""})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"updateContent",value:function(e){this.setState({content:e})}},{key:"editorChange",value:function(e){var t=e.editor.getData();this.setState({content:t})}},{key:"onBlur",value:function(e){}},{key:"afterPaste",value:function(e){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=(this.props.role,this.state),n=t.previewVisible,i=t.fileList,a=t.previewImage,o=t.disable,r=(t.categories,t.heroLength,t.tags,t.inputVisible,t.inputValue,t.breaking,m.a.createElement("div",null,m.a.createElement(b.a,{type:"plus"}),m.a.createElement("div",{className:"ant-upload-text"},"Upload"))),s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return m.a.createElement(y.a,{className:"gx-card",title:"Add Blog"},m.a.createElement(g.a,{onSubmit:this.handleSubmit},m.a.createElement(P,Object.assign({},s,{label:m.a.createElement("span",null,"Title\xa0",m.a.createElement(C.a,{title:"What is the title of the blog"},m.a.createElement(b.a,{type:"question-circle-o"})))}),e("title",{rules:[{required:!0,message:"Please input your title!",whitespace:!0},{max:150,message:"Max is 150 letter !",whitespace:!0}]})(m.a.createElement(v.a,null))),m.a.createElement(P,Object.assign({},s,{label:m.a.createElement("span",null,"Seo")}),e("seo",{rules:[{required:!0,message:"Please input your seo!",whitespace:!0},{max:50,message:"Max is 50 letter !",whitespace:!0}]})(m.a.createElement(v.a,null))),m.a.createElement(P,Object.assign({},s,{label:m.a.createElement("span",null,"Blog Introduction")}),e("blog_intro",{rules:[{required:!0,message:"Please input your intro!",whitespace:!0},{max:260,message:"Max Letters for Intro is 260",whitespace:!0}]})(m.a.createElement(R,{rows:4}))),m.a.createElement(P,Object.assign({},s,{label:m.a.createElement("span",null,"Upload Header Photo")}),m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:i,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile},1===i.length?null:r),m.a.createElement(E.a,{visible:n,footer:null,onCancel:this.handleCancel},m.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))),m.a.createElement(P,Object.assign({},s,{label:m.a.createElement("span",null,"Description")}),m.a.createElement(x.a,{init:{images_upload_url:"/api/v2/files/uploadFile",images_upload_base_path:"/api/v2/files/uploadFile",image_caption:!0,images_upload_handler:function(e,t,n){var i=new FormData;i.append("file",e.blob()),j.a.post("/api/v2/files/uploadFile",i).then(function(e){var n=e.data.fullName;t("/api/v2/files/getFile/".concat(n))}).catch(function(e){n("error !")})},height:700,image_title:!0,automatic_uploads:!0,file_picker_types:"file image media",images_upload_credentials:!0,plugins:"print preview fullpage powerpaste searchreplace autolink directionality advcode visualblocks visualchars fullscreen image link media mediaembed template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount tinymcespellchecker a11ychecker imagetools textpattern help formatpainter permanentpen pageembed mentions linkchecker",toolbar:"formatselect | bold italic strikethrough forecolor backcolor permanentpen formatpainter | link image media pageembed | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent | removeformat | addcomment"},onChange:this.handleEditorChange})),m.a.createElement(P,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},o?m.a.createElement(O.a,{type:"primary",disabled:!0,htmlType:"submit"},"Submit"):m.a.createElement(O.a,{type:"primary",htmlType:"submit"},"Submit"))),m.a.createElement(k.NotificationContainer,null))}}]),t}(d.Component),M=g.a.create()(D);t.default=Object(h.b)(function(e){var t=e.auth;return{authUser:t.authUser,url:t.url,role:t.role}})(M)},642:function(e,t,n){"use strict";var i=n(0),a=n(1),o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},r={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func},s=o({apiKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,textareaName:a.string},r),l=function(e){return"function"===typeof e},c=0,u=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++c+String(t)},p=function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()},f=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},d=function(e,t){return f(e).concat(f(t))},m=n(643),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},v={listeners:[],scriptId:u("tiny-script"),scriptLoaded:!1},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t.initialise=function(){var e=g({},t.props.init,{target:t.element,readonly:t.props.disabled,inline:t.inline,plugins:d(t.props.init&&t.props.init.plugins,t.props.plugins),toolbar:t.props.toolbar||t.props.init&&t.props.init.toolbar,setup:function(e){t.editor=e,e.on("init",function(n){t.initEditor(n,e)}),t.props.init&&"function"===typeof t.props.init.setup&&t.props.init.setup(e)}});p(t.element)&&(t.element.style.visibility=""),Object(m.a)().init(e)},t}return h(t,e),t.prototype.componentWillMount=function(){this.id=this.id||this.props.id||u("tiny-react"),this.inline=this.props.inline?this.props.inline:this.props.init&&this.props.init.inline},t.prototype.componentDidMount=function(){if(null!==Object(m.a)())this.initialise();else if(this.element&&this.element.ownerDocument){var e=this.element.ownerDocument,t=this.props.cloudChannel,n=this.props.apiKey?this.props.apiKey:"";!function(e,t,n,i){e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||function(e,t,n,i){var a=t.createElement("script");a.type="application/javascript",a.id=e,a.addEventListener("load",i),a.src=n,t.head&&t.head.appendChild(a)}(e.scriptId,t,n,function(){e.listeners.forEach(function(e){return e()}),e.scriptLoaded=!0}))}(v,e,"https://cloud.tinymce.com/"+t+"/tinymce.min.js?apiKey="+n,this.initialise)}},t.prototype.componentWillUnmount=function(){null!==Object(m.a)()&&Object(m.a)().remove(this.editor)},t.prototype.componentWillReceiveProps=function(e){this.editor&&this.editor.initialized&&(this.currentContent=this.currentContent||this.editor.getContent(),"string"===typeof e.value&&e.value!==this.props.value&&e.value!==this.currentContent&&this.editor.setContent(e.value),"boolean"===typeof e.disabled&&e.disabled!==this.props.disabled&&this.editor.setMode(e.disabled?"readonly":"design"))},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.initEditor=function(e,t){var n=this,i="string"===typeof this.props.value?this.props.value:"string"===typeof this.props.initialValue?this.props.initialValue:"";t.setContent(i),l(this.props.onEditorChange)&&t.on("change keyup setcontent",function(e){n.currentContent=t.getContent(),l(n.props.onEditorChange)&&n.props.onEditorChange(n.currentContent)}),function(e,t,n){var i;Object.keys(e).filter((i=Object.keys(r),function(e){return-1!==i.indexOf(e)})).forEach(function(i){var a=e[i];l(a)&&("onInit"===i?a(n,t):t.on(i.substring(2),function(e){return a(e,t)}))})}(this.props,t,e)},t.prototype.renderInline=function(){var e=this,t=this.props.tagName,n=void 0===t?"div":t;return i.createElement(n,{ref:function(t){return e.element=t},id:this.id})},t.prototype.renderIframe=function(){var e=this;return i.createElement("textarea",{ref:function(t){return e.element=t},style:{visibility:"hidden"},id:this.id,name:this.props.textareaName})},t.propTypes=s,t.defaultProps={cloudChannel:"5"},t}(i.Component);n.d(t,"a",function(){return b})},643:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var i=function(){return"undefined"!==typeof window?window:e},a=function(){var e=i();return e&&e.tinymce?e.tinymce:null}}).call(this,n(61))},647:function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return i})}}]);
//# sourceMappingURL=33.d623392b.chunk.js.map