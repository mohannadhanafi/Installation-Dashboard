(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1293:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a.n(n),r=a(34),s=a(17),l=a(18),o=a(21),c=a(19),u=a(20),p=a(0),m=a.n(p),f=a(620),d=a(622),v=a(14),h=a(627),g=a(621),b=a(623),w=a(45),E=(a(633),a(25)),y=a.n(E),S=a(35),x=f.a.Item,C=d.a.TextArea,O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={content:"",fileList:[],previewVisible:!1,previewImage:"",categories:[],fileName:"",removedFile:[],disable:!1},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){a.setState({disable:!0});var n=a.state,s=n.content,l=n.fileList,o=n.removedFile,c=[];l.map(function(e){return c.push(e.response.fullName),c}),0!==c.length?(t.icon=c[0],t.body=s,y.a.post("/api/v2/core",t).then(function(e){var t=e.data.message;S.NotificationManager.success(t,"SUCCESS",2e3),setTimeout(function(){a.props.history.push("/admin/core/viewcore"),a.setState({disable:!1})},3e3),o.length&&o.map(function(){var e=Object(r.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/v2/files/removeFile",{pic:t});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}).catch(function(){var e=Object(r.a)(i.a.mark(function e(t){var n,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.response,r=n.data.message,s=n.statusText,S.NotificationManager.error(r||s,"ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())):(S.NotificationManager.error("Please Choose image or video !","ERROR",2e3),setTimeout(function(){a.setState({disable:!1})},2e3))}})},a.handleEditorChange=function(e){var t=e.target.getContent();a.setState(function(){return{content:t}})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.removeFile=function(){var e=Object(r.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.removedFile,r=t.response.fullName,n.push(r),a.setState({removedFile:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.file,n=e.fileList;a.setState({fileList:n});var i="image/svg+xml"===t.type,r="image/png"===t.type;if(i||r){if("done"===t.status){var s=t.response.fullName;a.setState({fileName:s})}}else S.NotificationManager.error("You can only upload svg files!","ERROR",2e3),a.setState({fileList:[]})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.previewVisible,n=t.fileList,i=t.previewImage,r=t.disable,s=m.a.createElement("div",null,m.a.createElement(v.a,{type:"plus"}),m.a.createElement("div",{className:"ant-upload-text"},"Upload")),l={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return m.a.createElement(h.a,{className:"gx-card",title:"Add Core"},m.a.createElement(f.a,{onSubmit:this.handleSubmit},m.a.createElement(x,Object.assign({},l,{label:m.a.createElement("span",null,"Icon")}),m.a.createElement(m.a.Fragment,null,m.a.createElement(g.a,{action:"/api/v2/files/uploadFile",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.removeFile,accept:"image/png, image/svg+xml"},1===n.length?null:s),m.a.createElement(b.a,{visible:a,footer:null,onCancel:this.handleCancel},m.a.createElement("img",{alt:"example",style:{width:"100%"},src:i})))),m.a.createElement(x,Object.assign({},l,{label:m.a.createElement("span",null,"Title")}),e("title",{rules:[{required:!0,message:"Please input the title!",whitespace:!0},{max:30,message:"Max is 30 letter"}]})(m.a.createElement(d.a,null))),m.a.createElement(x,Object.assign({},l,{label:m.a.createElement("span",null,"Description")}),e("desc",{rules:[{required:!0,message:"Please input the description!",whitespace:!0},{max:150,message:"Max is 150 letter"}]})(m.a.createElement(C,null))),m.a.createElement(x,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r?m.a.createElement(w.a,{type:"primary",disabled:!0,htmlType:"submit"},"Submit"):m.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Submit"))),m.a.createElement(S.NotificationContainer,null))}}]),t}(p.Component),N=f.a.create()(O);t.default=N},633:function(e,t,a){}}]);
//# sourceMappingURL=55.dd3dffc7.chunk.js.map